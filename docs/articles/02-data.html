<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>flumodelr: Data • flumodelr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">flumodelr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01-introduction.html">flumodelr: Introduction</a>
    </li>
    <li>
      <a href="../articles/02-data.html">flumodelr: Data</a>
    </li>
    <li>
      <a href="../articles/03-ratediff.html">Incidence rate-difference models</a>
    </li>
    <li>
      <a href="../articles/04-serfling.html">Serfling Model Background</a>
    </li>
    <li>
      <a href="../articles/05-modserf.html">Modified Serfling Models</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kmcconeghy/flumodelr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>flumodelr: Data</h1>
                        <h4 class="author">Kevin W. McConeghy</h4>
            
            <h4 class="date">2017-12-28</h4>
          </div>

    
    
<div class="contents">
<p>The following brief descriptions of test data used in this package.</p>
<div id="centers-for-diseases-control-and-prevention-122-cities" class="section level1">
<h1 class="hasAnchor">
<a href="#centers-for-diseases-control-and-prevention-122-cities" class="anchor"></a>Centers for Diseases Control and Prevention 122-cities</h1>
<div id="description-from-cdc-website" class="section level2">
<h2 class="hasAnchor">
<a href="#description-from-cdc-website" class="anchor"></a>Description from CDC website</h2>
<p>This file contains the complete set of data reported to 122 Cities Mortality Reposting System. The system was retired on 10/6/2016. 122 cities across the United States reported the total number of death certificates processed and the number of those for which pneumonia or influenza was listed as the underlying or contributing cause of death by age group. A death is reported by the place of its occurrence and by the week that the death certificate was filed. Fetal deaths are not included. After the system was retired, mortality has been monitored via a more general mechanism described here:</p>
<blockquote>
<p>National Center for Health Statistics (NCHS) mortality surveillance data – &gt; NCHS collects death certificate data from state vital statistics offices for &gt; all deaths occurring in the United States. Pneumonia and influenza (P&amp;I) deaths are identified based on ICD-10 multiple cause of death codes. NCHS surveillance data are aggregated by the week of death occurrence and as a result, P&amp;I percentages based on the NCHS surveillance data are released two &gt; weeks after the week of death to allow for collection of enough data to produce a stable P&amp;I percentage. The NCHS surveillance data based on P&amp;I percentage for earlier weeks are continually revised and may increase or decrease as new and updated death certificate data are received from the states by NCHS. The seasonal baseline of P&amp;I deaths is calculated using a periodic regression model that incorporates a robust regression procedure applied to data from the previous five years. An increase of 1.645 standard &gt; deviations above the seasonal baseline of P&amp;I deaths is considered the “epidemic threshold,” i.e., the point at which the observed proportion of deaths attributed to pneumonia or influenza was significantly higher than would be expected at that time of the year in the absence of substantial influenza-related mortality.</p>
</blockquote>
<p><a href="https://www.cdc.gov/flu/weekly/overview.htm" class="uri">https://www.cdc.gov/flu/weekly/overview.htm</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cdc122 &lt;-<span class="st"> </span>(flumodelr<span class="op">::</span>cdc122city)  
<span class="kw">dim</span>(cdc122)
<span class="co">#&gt; [1] 346342      8</span>
cdc122
<span class="co">#&gt; # A tibble: 346,342 x 8</span>
<span class="co">#&gt;   region state city    year  week deaths_pnaflu deaths_allcause deaths_65~</span>
<span class="co">#&gt;    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;int&gt; &lt;int&gt;         &lt;int&gt;           &lt;int&gt;      &lt;int&gt;</span>
<span class="co">#&gt; 1      1 MA    Boston  1962     1            11             262        146</span>
<span class="co">#&gt; 2      1 MA    Boston  1962     2            11             270        167</span>
<span class="co">#&gt; 3      1 MA    Boston  1962     3             5             237        142</span>
<span class="co">#&gt; 4      1 MA    Boston  1962     4            12             285        175</span>
<span class="co">#&gt; # ... with 346,338 more rows</span></code></pre></div>
</div>
</div>
<div id="nrevss" class="section level1">
<h1 class="hasAnchor">
<a href="#nrevss" class="anchor"></a>NREVSS</h1>
<div id="cdc-website-description" class="section level2">
<h2 class="hasAnchor">
<a href="#cdc-website-description" class="anchor"></a>CDC Website Description</h2>
<p>Viral Surveillance — Data collection from both the U.S. World Health Organization (WHO) Collaborating Laboratories and National Respiratory and Enteric Virus Surveillance System (NREVSS) laboratories began during the 1997-98 season. During the 1997-98 season 43 state public health laboratories participated in surveillance, and by the 2004-05 season all state public health laboratories were participating in surveillance.</p>
<p>The CDC cautions against cross-sectional evaluations:</p>
<blockquote>
<p>The number of specimens tested and % positive rate vary by region and season based on different testing practices including triaging of specimens &gt; by the reporting labs, therefore it is not appropriate to compare the magnitude of positivity rates or the number of positive specimens between regions or seasons.</p>
</blockquote>
<p>Regarding subtype:</p>
<blockquote>
<p>The U.S. WHO and NREVSS collaborating laboratories report the total number &gt; of respiratory specimens tested and the number positive for influenza types &gt; A and B each week to CDC. Most of the U.S. WHO collaborating laboratories also report the influenza A subtype (H1 or H3) of the viruses they have isolated, but the majority of NREVSS laboratories do not report the influenza A subtype.</p>
</blockquote>
<p>For more information: <a href="http://www.cdc.gov/flu/weekly/overview.htm#Viral" class="uri">http://www.cdc.gov/flu/weekly/overview.htm#Viral</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nrevss &lt;-<span class="st"> </span>(flumodelr<span class="op">::</span>nrevss)  
<span class="kw">dim</span>(nrevss)
<span class="co">#&gt; [1] 14094    12</span>
nrevss
<span class="co">#&gt; # A tibble: 14,094 x 12</span>
<span class="co">#&gt;   state   year  week spec~ spec~ type~ type~ type~ type~ type~ type~ type~</span>
<span class="co">#&gt;   &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1 Alaba~  2010    40    54  0        0     0     0     0     0     0     0</span>
<span class="co">#&gt; 2 Alaska  2010    40    40  0        0     0     0     0     0     0     0</span>
<span class="co">#&gt; 3 Arizo~  2010    40    40  2.50     0     0     1     0     0     0     0</span>
<span class="co">#&gt; 4 Arkan~  2010    40    15  0        0     0     0     0     0     0     0</span>
<span class="co">#&gt; # ... with 14,090 more rows</span></code></pre></div>
</div>
</div>
<div id="ilinet" class="section level1">
<h1 class="hasAnchor">
<a href="#ilinet" class="anchor"></a>ILINet</h1>
<div id="cdc-website-description-1" class="section level2">
<h2 class="hasAnchor">
<a href="#cdc-website-description-1" class="anchor"></a>CDC Website Description</h2>
<p>Outpatient Illness Surveillance — Information on patient visits to health care providers for influenza-like illness is collected through the U.S. Outpatient Influenza-like Illness Surveillance Network (ILINet).</p>
<p>CDC cautions regarding cross-sectional comparisons:</p>
<blockquote>
<p>The number and percent of patients presenting with ILI each week will vary &gt; by region and season due to many factors, including having different provider type mixes (children present with higher rates of ILI than adults, &gt; and therefore regions with a higher percentage of pediatric practices will have higher numbers of cases). Therefore it is not appropriate to compare the magnitude of the percent of visits due to ILI between regions and seasons.</p>
</blockquote>
<p>For more information, see: <a href="http://www.cdc.gov/flu/weekly/overview.htm#Outpatient" class="uri">http://www.cdc.gov/flu/weekly/overview.htm#Outpatient</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ilinet &lt;-<span class="st"> </span>(flumodelr<span class="op">::</span>ilinet)  
<span class="kw">dim</span>(ilinet)
<span class="co">#&gt; [1] 19556     7</span>
ilinet
<span class="co">#&gt; # A tibble: 19,556 x 7</span>
<span class="co">#&gt;   state     year  week ili_perc ili_tot providers patients</span>
<span class="co">#&gt;   &lt;chr&gt;    &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;   &lt;int&gt;     &lt;int&gt;    &lt;int&gt;</span>
<span class="co">#&gt; 1 Alabama   2010    40    2.13      249        35    11664</span>
<span class="co">#&gt; 2 Alaska    2010    40    0.875      15         7     1714</span>
<span class="co">#&gt; 3 Arizona   2010    40    0.675     172        49    25492</span>
<span class="co">#&gt; 4 Arkansas  2010    40    0.696      18        15     2586</span>
<span class="co">#&gt; # ... with 19,552 more rows</span></code></pre></div>
</div>
<div id="mmwr-weeks" class="section level2">
<h2 class="hasAnchor">
<a href="#mmwr-weeks" class="anchor"></a>MMWR Weeks</h2>
<p>The MMWR Week is a unique definition used by the CDC. This definition is born out in the <code><a href="../reference/cdc122city.html">?cdc122city</a></code> dataset.</p>
<p>The following explanation of the definition was obtained from: <a href="https://wwwn.cdc.gov/nndss/document/MMWR_Week_overview.pdf" class="uri">https://wwwn.cdc.gov/nndss/document/MMWR_Week_overview.pdf</a></p>
<blockquote>
<p>“The MMWR week is the week of the epidemiologic year for which the National Notifiable Diseases Surveillance System (NNDSS) disease report is assigned by the reporting local or state health department for the purposes of MMWR disease incidence reporting and publishing. Values for MMWR week range from 1 to 53, although most years consist of 52 weeks.”</p>
</blockquote>
<p>CDC business rules for assigning MMWR week:</p>
<blockquote>
<p>“The first day of any MMWR week is Sunday. MMWR week numbering is sequential beginning with 1 and incrementing with each week to a maximum of 52 or 53. MMWR week #1 of an MMWR year is the first week of the year that has at least four days in the calendar year.”</p>
</blockquote>
<p>This means if Jan. 1 occurs on a Sunday, Monday, Tuesday or Wednesday, the calendar week that includes Jan. 1 would be MMWR week #1. If Jan 1 occurs on a Thursday, Friday, or Saturday, the calendar week that includes Jan 1 would be the last MMWR week of the previous year (#52 or #53). Because of this rule, December 29, 30, and 31 could potentially fall into MMWR week #1 of the following MMWR year.</p>
<p>All <code><a href="../reference/ilinet.html">?ilinet</a></code> , <code><a href="../reference/cdc122city.html">?cdc122city</a></code> and <code><a href="../reference/nrevss.html">?nrevss</a></code> datasets are imported in their raw CDC format. It is the perogative of the user to determine how best to treat the CDC MMWR week definition. However, we illustrate below how the above description was used to compute a first day of week, date variable for the example dataset <code><a href="../reference/fludta.html">?fludta</a></code>.</p>
<p>Alternative package which addresses this:</p>
<p>Xiahong Zhao (2016). EpiWeek: Conversion Between Epidemiological Weeks and Calendar Dates. R package version 1.1. <a href="https://CRAN.R-project.org/package=EpiWeek" class="uri">https://CRAN.R-project.org/package=EpiWeek</a></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"EpiWeek"</span>)</code></pre></div>
<p>Also see <code>?epiweek()</code></p>
</div>
<div id="using-the-cdc122-cities-as-example" class="section level2">
<h2 class="hasAnchor">
<a href="#using-the-cdc122-cities-as-example" class="anchor"></a>Using the CDC122 Cities as Example</h2>
<p>Code adapted from <code>EpiWeek</code> package.</p>
<div id="conversion-function" class="section level4">
<h4 class="hasAnchor">
<a href="#conversion-function" class="anchor"></a>Conversion function</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate) <span class="co">#For working with dates  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'lubridate'</span>
<span class="co">#&gt; The following object is masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     date</span>
EpiWeekToDates &lt;-<span class="st"> </span><span class="cf">function</span>(year, weeknum) {
  
  <span class="co">#Compute 4th day in January</span>
    jan4 &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="kw">paste</span>(year, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dt">sep=</span><span class="st">"-"</span>))
  
  <span class="co">#Compute day of week</span>
    DofW &lt;-<span class="st"> </span><span class="kw">wday</span>(jan4, <span class="dt">week_start =</span> <span class="dv">7</span>)<span class="op">-</span><span class="dv">1</span> <span class="co">#Sunday start</span>
    <span class="co">#The -1 is  correction for how wday() counts days  </span>
    
  <span class="co">#If Jan 4th was Sun, starting week date is 01/04/xxxx</span>
    startweek &lt;-<span class="st"> </span><span class="kw">if_else</span>(DofW <span class="op">==</span><span class="st"> </span><span class="dv">7</span>, jan4, (jan4 <span class="op">-</span><span class="st"> </span>(DofW)))
 
  <span class="co">#First Date of Week</span>
    d0 =<span class="st"> </span>startweek <span class="op">+</span><span class="st"> </span>(weeknum <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="dv">7</span>
  
  <span class="co">#Last Date of Week</span>
    d1 =<span class="st"> </span>startweek <span class="op">+</span><span class="st"> </span>(weeknum <span class="op">-</span><span class="st"> </span><span class="dv">1</span>) <span class="op">*</span><span class="st"> </span><span class="dv">7</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span> 
  
  <span class="kw">return</span>(<span class="kw">list</span>(<span class="dt">d0 =</span> <span class="kw">ymd</span>(d0), <span class="dt">d1 =</span> <span class="kw">ymd</span>(d1)))
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">example &lt;-<span class="st"> </span>cdc122 <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">FirstDateOfWeek =</span> <span class="kw">EpiWeekToDates</span>(year, week)[[<span class="dv">1</span>]])

example <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(year, week, FirstDateOfWeek) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">distinct</span>() <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">filter</span>(year<span class="op">&gt;</span><span class="dv">2010</span>)
<span class="co">#&gt; # A tibble: 300 x 3</span>
<span class="co">#&gt;    year  week FirstDateOfWeek</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;date&gt;         </span>
<span class="co">#&gt; 1  2011     1 2011-01-02     </span>
<span class="co">#&gt; 2  2011     2 2011-01-09     </span>
<span class="co">#&gt; 3  2011     3 2011-01-16     </span>
<span class="co">#&gt; 4  2011     4 2011-01-23     </span>
<span class="co">#&gt; # ... with 296 more rows</span></code></pre></div>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#centers-for-diseases-control-and-prevention-122-cities">Centers for Diseases Control and Prevention 122-cities</a><ul class="nav nav-pills nav-stacked">
<li><a href="#description-from-cdc-website">Description from CDC website</a></li>
      </ul>
</li>
      <li>
<a href="#nrevss">NREVSS</a><ul class="nav nav-pills nav-stacked">
<li><a href="#cdc-website-description">CDC Website Description</a></li>
      </ul>
</li>
      <li>
<a href="#ilinet">ILINet</a><ul class="nav nav-pills nav-stacked">
<li><a href="#cdc-website-description-1">CDC Website Description</a></li>
      <li><a href="#mmwr-weeks">MMWR Weeks</a></li>
      <li><a href="#using-the-cdc122-cities-as-example">Using the CDC122 Cities as Example</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Kevin W. McConeghy, Rob Van Aalst, Andrew Zullo, Nina joyce.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
