<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Incidence rate-difference models • flumodelr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Incidence rate-difference models">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flumodelr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9999</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/01-introduction.html">flumodelr: Introduction</a>
    </li>
    <li>
      <a href="../articles/02-data.html">flumodelr: Data</a>
    </li>
    <li>
      <a href="../articles/03-ratediff.html">Incidence rate-difference models</a>
    </li>
    <li>
      <a href="../articles/04-serfling.html">Serfling Model Background</a>
    </li>
    <li>
      <a href="../articles/05-modserf.html">Modified Serfling Models</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/kmcconeghy/flumodelr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Incidence rate-difference models</h1>
                        <h4 class="author">Rob van Aalst</h4>
            
            <h4 class="date">2019-06-06</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/kmcconeghy/flumodelr/blob/master/vignettes/03-ratediff.Rmd"><code>vignettes/03-ratediff.Rmd</code></a></small>
      <div class="hidden name"><code>03-ratediff.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">fludta &lt;-<span class="st"> </span>flumodelr<span class="op">::</span>fludta</a></code></pre></div>
<div id="introduction-to-incidence-rate-difference-models" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction-to-incidence-rate-difference-models" class="anchor"></a>Introduction to incidence rate-difference models</h2>
<p>Incidence rate-difference models are among the first to estimate influenza-associated hospitalizations and deaths <span class="citation">(Izurieta HS 2000)</span>. In these models incidence rates in periods with low viral activity are substracted from incidence rates in periods with high viral activity. This difference in incidence rate is assumed to be influenza attributable.</p>
</div>
<div id="virology-data" class="section level2">
<h2 class="hasAnchor">
<a href="#virology-data" class="anchor"></a>Virology data</h2>
<p>To determine periods with high and low viral activity, researchers often use laboratory confirmed influenza data or the percent of isolates positive with influenza viral types. This is publically available in many cases, see <code><a href="../reference/nrevss.html">?nrevss</a></code> for US surveillance data. The data describes the proportion of isolates tested positive for a certain viral type, which may be obtained from participating hospital and outpatient settings.</p>
</div>
<div id="definition-of-periods-default-values" class="section level2">
<h2 class="hasAnchor">
<a href="#definition-of-periods-default-values" class="anchor"></a>Definition of periods: default values</h2>
<p>We followed Thompson <span class="citation">(Thompson WW 2009)</span> and defined the respiratory season to start at the beginning of July (week 27) of each calendar year. Within a respiratory season we defined four periods:</p>
<ol style="list-style-type: lower-alpha">
<li>a high viral activity period consisting of weeks when at least 10% of specimens are positive,</li>
<li>a peri-season baseline period consisting of weeks when less than 10% of specimens were positive, and;</li>
<li>an influenza season defined as the weeks from October (week 40) through April (week 18),</li>
<li>a summer-season baseline period defined as the weeks from July (week 27) through September (week 39) at the beginning of each respiratory season and May (week 19) and June (week 26) at the end of each respiratory season when there is little viral activity.</li>
</ol>
<p>Options c and d can be used in the absense of laboratory confirmed influenza surveillance data to define high and low viral activity periods.</p>
</div>
<div id="annual-excess-numbers" class="section level2">
<h2 class="hasAnchor">
<a href="#annual-excess-numbers" class="anchor"></a>Annual excess numbers</h2>
<p>Weekly excess outcome rates will be converted to annual excess numbers of outcomes by using the number of weeks that were above an epidemic threshold, and available US census data:</p>
<p>annual excess [outcomes] = (excess weekly rate) x (number of epidemic weeks) x (population).</p>
<div id="example-peri-season-adjusted-influenza-attributable-mortality" class="section level3">
<h3 class="hasAnchor">
<a href="#example-peri-season-adjusted-influenza-attributable-mortality" class="anchor"></a>Example: peri-season adjusted influenza attributable mortality</h3>
<p>In this example we will estimate influenza attributable mortality using a peri-season adjustment. We will adjust mortality in weeks with high viral activity (a) with weeks when viral activity was low (b). All we have is a dataset with surveillance data (‘prop_flupos’) in a certain calendar ‘year’ and ‘week’, plus the observed number of all cause hospitalizations in that week (‘alldeaths’).</p>
<p>We remove years without viral activity</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">df &lt;-<span class="st"> </span>fludta <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(year<span class="op">&gt;</span><span class="dv">2010</span> <span class="op">&amp;</span><span class="st"> </span>year <span class="op">&lt;</span><span class="dv">2016</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="st">  </span><span class="kw">select</span>(year, week, alldeaths, prop_flupos, week)</a></code></pre></div>
</div>
<div id="step-2--ird-function" class="section level3">
<h3 class="hasAnchor">
<a href="#step-2--ird-function" class="anchor"></a>Step 2. ird() function</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">fludta_mod &lt;-<span class="st"> </span><span class="kw"><a href="../reference/ird.html">ird</a></span>(<span class="dt">data =</span>df, </a>
<a class="sourceLine" id="cb3-2" title="2">                  <span class="dt">outc =</span>alldeaths, </a>
<a class="sourceLine" id="cb3-3" title="3">                  <span class="dt">viral=</span>prop_flupos, </a>
<a class="sourceLine" id="cb3-4" title="4">                  <span class="dt">time =</span>week,</a>
<a class="sourceLine" id="cb3-5" title="5">                  <span class="dt">echo =</span>T)</a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt; incidence rate-difference model </span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt;  ============================================================ </span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt; Setting ird parameters...</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt;  'outc' argument is: alldeaths </span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt;  'time' variable is: week </span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt;  'viral' variable is: prop_flupos </span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt;  'high' variable is: 0.1 </span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#&gt;   time period is: 52</span></a></code></pre></div>
<p>The initial function prepares the dataset by identifying periods of high and low viral activity in the respiratory season. It creates the table fludta_mod, adding 3 varables (columns): respiratory ‘season’, ‘high[,“prop_flupos”]’ (TRUE = high viral activity, FALSE = low viral activity), and ‘fluseason’ (TRUE = flu season, FALSE = summer-season baseline)</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">fludta_mod <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(year, week, alldeaths, </a>
<a class="sourceLine" id="cb4-2" title="2">                      prop_flupos, week, season, high, fluseason)</a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">#&gt; # A tibble: 261 x 7</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">#&gt;    year  week alldeaths prop_flupos season high[,"prop_flupos"] fluseason</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt;   &lt;int&gt; &lt;int&gt;     &lt;int&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;lgl&gt;                &lt;lgl&gt;    </span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt; 1  2011     1     13291      0.239    2010 TRUE                 TRUE     </span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt; 2  2012     1     10906      0.0334   2011 FALSE                TRUE     </span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt; 3  2013     1     11258      0.374    2012 TRUE                 TRUE     </span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt; 4  2014     1     11070      0.281    2013 TRUE                 TRUE     </span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt; # ... with 257 more rows</span></a></code></pre></div>
<p>Note that ‘high[,“prop_flupos”]’ will not be created if ird(viral= missing).</p>
</div>
<div id="step-2--rb-function" class="section level3">
<h3 class="hasAnchor">
<a href="#step-2--rb-function" class="anchor"></a>Step 2. rb() function</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">fludta_rates &lt;-<span class="st"> </span><span class="kw"><a href="../reference/rb.html">rb</a></span>(<span class="dt">data =</span>fludta_mod, <span class="dt">outc =</span>alldeaths, <span class="dt">echo =</span> T)</a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co">#&gt; Setting rb parameters...</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">#&gt;  'outc' argument is: alldeaths</span></a></code></pre></div>
<p>The rb() function aggregates the outcomes per time period (weeks in our example) to outcomes per respiratory season, stratified by period of high and low viral activity, and excess rates (period = “High” - period = “Low”).</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">fludta_rates</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="co">#&gt; # A tibble: 18 x 4</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co">#&gt;   season period alldeaths_fluseason alldeaths_viral_act</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co">#&gt;    &lt;dbl&gt; &lt;fct&gt;                &lt;dbl&gt;               &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co">#&gt; 1   2010 Excess               1133.               1172.</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="co">#&gt; 2   2010 Low                 10982.              11046.</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="co">#&gt; 3   2010 High                12116.              12218.</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">#&gt; 4   2011 Excess                519.                155.</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co">#&gt; # ... with 14 more rows</span></a></code></pre></div>
<p>For ‘alldeaths_fluseason’, ‘period’ is defined by flu season (High = flu season, Low = summer-season baseline) For ‘alldeaths_viral_act’, ‘period’ is defined by viral activity (High = high viral activity, Low = low viral activity)</p>
<p>Note that ‘alldeaths_viral_act’ will not be created if ird(viral= missing).</p>
</div>
<div id="generate-figure" class="section level3">
<h3 class="hasAnchor">
<a href="#generate-figure" class="anchor"></a>Generate figure</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="../reference/gr.html">gr</a></span>(<span class="dt">data =</span>fludta_rates, <span class="dt">outc =</span>alldeaths_fluseason, <span class="dt">echo =</span> <span class="ot">FALSE</span> )</a></code></pre></div>
<p><img src="03-ratediff_files/figure-html/unnamed-chunk-7-1.png" width="672"></p>
</div>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-Izurieta2000">
<p>Izurieta HS, Kramarz P, Thompson WW. 2000. “Influenza and the Rates of Hospitalization for Respiratory Disease Among Infants and Young Children.” <em>N Engl J Med</em> 342: 232–39.</p>
</div>
<div id="ref-Thompson2009">
<p>Thompson WW, Dhankar PY, Weintraub E. 2009. “Estimates of Us Influenza-Associated Deaths Made Using Four Different Methods.” <em>Influenza Other Respir Viruses</em> 3(1): 37–49.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction-to-incidence-rate-difference-models">Introduction to incidence rate-difference models</a></li>
      <li><a href="#virology-data">Virology data</a></li>
      <li><a href="#definition-of-periods-default-values">Definition of periods: default values</a></li>
      <li><a href="#annual-excess-numbers">Annual excess numbers</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Kevin W. McConeghy, Rob Van Aalst, Andrew Zullo, Nina Joyce.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
